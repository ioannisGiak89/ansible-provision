---
  - name: Install Fish - add repository
    apt_repository:
      repo: 'ppa:fish-shell/release-2'
      update_cache: yes
      state: present
    when: ansible_distribution == 'Ubuntu'
    become: yes

  - name: Install Fish - install
    apt:
      name: fish
    when: ansible_distribution == 'Ubuntu'
    become: yes

  - name: Install Fish - set Fish as deafault shell
    expect:
      command: "chsh -s /usr/bin/fish"
      responses:
        (?i)password: "{{ ansible_become_pass }}"

  - name: Install Fish - Create config directory
    file:
      path:  ~/.config/fish
      state: directory
      mode: 0775

  - name: Install Fish - create symlink to config file
    file:
      src: config.fish
      dest: ~/.config/fish/config.fish
      state: link

  - name: Download oh-my-fishs
    get_url:
      url: https://get.oh-my.fish
      dest: ~/Downloads/install-oh-my-fish.fish

  - name: Install Fish - install oh my fish
    command: fish ~/Downloads/install-oh-my-fish.fish

  - name: Install Fish - install simple-ass-prompt theme
    shell: omf install simple-ass-prompt
